<!DOCTYPE html>
<html>
<head>
  <title>Live Cam</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<body>
  <div>
      <canvas id="video-canvas" width="640" height="360"></canvas>
      <img id="image">
  </div>
  <script src="jsmpeg.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
  <script>
      
      const socket = io("http://127.0.0.1:5000/", 
          { 
      cors: {    
        origin: "*",    
        methods: ["GET", "POST"]  
      }})
        socket.on('image-event', (data) => {
            console.log(data)
            if (data){
              const imageEl = document.getElementById("image");
              imageEl.src = `data:image/jpeg;base64,${data.data}`;
            }else{
              console.log("without data")
            }
            
        })
      
      //   let canvasVideo = document.getElementById("video-canvas")
      // let ws = io("http://127.0.0.1:8088")
      // let player = new jsmpeg(ws, {
      //     canvas: canvasVideo,
      //     autoplay:true,
      //     audio: false,
      //     loop:true
      // })
  </script>
</body>
</html>
